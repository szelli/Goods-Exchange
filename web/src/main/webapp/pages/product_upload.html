<div ng-controller="productUploadCtrl">
	<div class="panel-group col-md-2" id="accordion">
		<h3>Menü</h3>
		<ul class="nav nav-pills nav-stacked">
			<li><a href="my_products.html">Termékeim</a></li>
			<li><a href="reservation.html">Termék foglalások</a></li>
			<li><a href="reservation.html">Kölcsönzött termékek</a></li>
			<li><a href="#messages">Üzenetek</a></li>
			<li><a href="#rates">Értékelések</a></li>
			<li><a href="private_profile.html">Profil szerkesztése</a></li>
		</ul>
	</div>
	<div class="container product_upload col-md-10">
		<form name="uploadform" novalidate class="css-form">
			<h2>{{label}}</h2>
			<div class="row product_datas">
				<div class="rental_calendar">
					<p>Válaszd ki mettől meddig szeretnéd bérbe adni</p>
					<div class="datepicker"><div class="datepicker-days" ><table class="table-condensed"><thead><tr><th class="prev">‹</th><th colspan="5" class="switch">May 2014</th><th class="next">›</th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">27</td><td class="day old">28</td><td class="day old">29</td><td class="day old">30</td><td class="day">1</td><td class="day">2</td><td class="day">3</td></tr><tr><td class="day">4</td><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td></tr><tr><td class="day">11</td><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day active">15</td><td class="day">16</td><td class="day">17</td></tr><tr><td class="day">18</td><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td></tr><tr><td class="day">25</td><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day">30</td><td class="day">31</td></tr><tr><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td></tr></tbody></table></div></div>
				</div>
				<div class="primary-datas">
					<div class="form-group" ng-class="{'has-error' : uploadform.name.$invalid && (!uploadform.name.$pristine || error_offpristine)}">
						<input name="name" ng-model="product.name" maxlength="21" required ng-minlength="5" ng-maxlength="20" class="form-control" placeholder="Terméknév">
						<span ng-show="uploadform.name.$error.required && (!uploadform.name.$pristine || error_offpristine)">
			            	A mező kitöltése kötelező!<br>
			            </span>
			            <span ng-show="uploadform.name.$error.minlength && !uploadform.name.$pristine">
			            	Legalább 5 karakter hosszú kell legyen a név!<br>
			            </span>
			            <span ng-show="uploadform.name.$error.maxlength && !uploadform.name.$pristine">
			            	Legfeljebb 20 karakter hosszú lehet a név!<br>
			            </span>
			        </div>
			        <div class="productUpDropdown">
						<div id="category" name="category" class="select-dropdown" tabindex="1" ng-class="{active : category_active}">
		                    <span tabindex="1" ng-click="toggleCategoryActive()" ng-class="{'select-error' : error_category}">{{product.categoryName}}</span>
		                    <ul class="uldropdown" ng-click="toggleCategoryActive()">
		                         <li data-ng-repeat="category in $root.categories" ng-click="setSelectedCategory(category)">{{category.name}}</li>    
		                    </ul>
		                </div>
		                <div id="city" name="city" class="select-dropdown" tabindex="2" ng-class="{active : city_active}">
		                    <span tabindex="1" ng-click="toggleCityActive()" ng-class="{'select-error' : error_city}">{{product.cityName}}</span>
		                    <ul class="uldropdown" ng-click="toggleCityActive()">
		                        <li data-ng-repeat="city in $root.cities" ng-click="setSelectedCity(city)">{{city.city}}</li>
		                    </ul>
		                </div>
					</div>
					<div class="form-group" ng-class="{'has-error' : uploadform.area.$invalid && (!uploadform.area.$pristine || error_offpristine)}">
						<input name="area" ng-model="product.area" class="form-control" placeholder="Körzet km-ben" required ng-pattern="/^[0-9]*$/" ng-minlength="1" maxlength="4" ng-maxlength="3">
						<span ng-show="uploadform.area.$error.required && (!uploadform.area.$pristine || error_offpristine)">
			            	A mező kitöltése kötelező!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.minlength && !uploadform.area.$pristine">
			            	Legalább 1 számjegyű kell legyen a körzet!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.maxlength && !uploadform.area.$pristine">
			            	Legfeljebb 3 számjegyű lehet a körzet!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.pattern && !uploadform.area.$pristine">
			            	Csak számokat tartalmazhat!<br>
			            </span>
			        </div>
			        <div class="form-group" ng-class="{'has-error' : uploadform.description.$invalid && (!uploadform.description.$pristine || error_offpristine)}">
						<textarea class="form-control" name="description" ng-model="product.description" class="product_descr" placeholder="Termékleírás" required maxlength="256" ng-maxlength="255"></textarea>
						<span ng-show="uploadform.description.$error.required && (!uploadform.description.$pristine || error_offpristine)">
			            	A mező kitöltése kötelező!<br>
			            </span>
			             <span ng-show="uploadform.description.$error.maxlength && !uploadform.description.$pristine">
			            	Legfeljebb 255 karakter hosszú lehet a leírás!<br>
			            </span>
					</div>
				</div>
			</div>
		</form>
		<div class="row image_upload" >
            <div class="col-md-8">
                <form action="api/fileUpload" method="post" name="imageUpload" enctype="multipart/form-data">
                    <div class="input-group">
                        <span class="input-group-btn">
                            <span class="btn btn-primary btn-file">
                                Kép választás <input type="file" ng-model="product.images" selectimages name="productImages" multiple>
                            </span>
                        </span>
                        <input type="text" class="form-control" name="imageName" readonly="">
                    </div>
                </form>
                <button class="btn btn-primary" ng-click="imagesUpload()">Feltöltés</button>
                <span class="error" ng-show="imageUpload.productImages.$error.selectimages && error_offpristine">
                    Legalább egy képet ki kell választanod, de maximum 5 képet választhatsz ki!
                </span>
                <span class="error" ng-show="!showPreviewImages && !imageUpload.productImages.$error.selectimages && error_offpristine">
                    Kérlek töltsd fel a kiválasztott képeket!
                </span>
            </div>
		</div>
		
        <div class="row" ng-show="showPreviewImages">
            <h3>Kép előnézet</h3>
            <div id="product_slide" class="carousel slide" data-ride="carousel">
                <ol class="carousel-indicators">
                    <li data-target="#product_slide" ng-repeat="file in previewImages track by $index" data-slide-to="$index" ng-class="{active : $index==0}"></li>
                </ol>

                <div class="carousel-inner">
                    <div class="item" ng-repeat="image in previewImages track by $index" ng-class="{active : $index==0}">
                        <img ng-src="{{image}}" alt="...">
                        <div class="carousel-caption">
                            Kép {{$index + 1}}
                        </div>
                    </div>
                </div>
                <a class="left carousel-control" href="#/productUpload#product_slide" data-slide="prev">
                    <span class="glyphicon glyphicon-chevron-left"></span>
                </a>
                <a class="right carousel-control" href="#/productUpload#product_slide" data-slide="next">
                    <span class="glyphicon glyphicon-chevron-right"></span>
                </a>
            </div>
        </div>
		<div class="row">
			<button class="btn btn-primary" ng-click="productUpload(uploadform,imageUpload)">{{btnlabel}}</button>
		</div>
	</div>
</div>