<div ng-controller="productUploadCtrl">
	<div class="panel-group col-md-2" id="accordion">
		<h3>Menü</h3>
		<ul class="nav nav-pills nav-stacked">
			<li><a href="my_products.html">Termékeim</a></li>
			<li><a href="reservation.html">Termék foglalások</a></li>
			<li><a href="reservation.html">Kölcsönzött termékek</a></li>
			<li><a href="#messages">Üzenetek</a></li>
			<li><a href="#rates">Értékelések</a></li>
			<li><a href="private_profile.html">Profil szerkesztése</a></li>
		</ul>
	</div>
	<div class="container product_upload col-md-10">
		<form name="uploadform" novalidate class="css-form">
			<h2>Termék feltöltés/Szerkesztés</h2>
			<div class="row product_datas">
				<div class="rental_calendar">
					<p>Válaszd ki mettől meddig szeretnéd bérbe adni</p>
					<div class="datepicker"><div class="datepicker-days" ><table class="table-condensed"><thead><tr><th class="prev">‹</th><th colspan="5" class="switch">May 2014</th><th class="next">›</th></tr><tr><th class="dow">Su</th><th class="dow">Mo</th><th class="dow">Tu</th><th class="dow">We</th><th class="dow">Th</th><th class="dow">Fr</th><th class="dow">Sa</th></tr></thead><tbody><tr><td class="day old">27</td><td class="day old">28</td><td class="day old">29</td><td class="day old">30</td><td class="day">1</td><td class="day">2</td><td class="day">3</td></tr><tr><td class="day">4</td><td class="day">5</td><td class="day">6</td><td class="day">7</td><td class="day">8</td><td class="day">9</td><td class="day">10</td></tr><tr><td class="day">11</td><td class="day">12</td><td class="day">13</td><td class="day">14</td><td class="day active">15</td><td class="day">16</td><td class="day">17</td></tr><tr><td class="day">18</td><td class="day">19</td><td class="day">20</td><td class="day">21</td><td class="day">22</td><td class="day">23</td><td class="day">24</td></tr><tr><td class="day">25</td><td class="day">26</td><td class="day">27</td><td class="day">28</td><td class="day">29</td><td class="day">30</td><td class="day">31</td></tr><tr><td class="day new">1</td><td class="day new">2</td><td class="day new">3</td><td class="day new">4</td><td class="day new">5</td><td class="day new">6</td><td class="day new">7</td></tr></tbody></table></div></div>
				</div>
				<div class="primary-datas">
					<div class="form-group" ng-class="{'has-error' : uploadform.name.$invalid && !uploadform.name.$pristine}">
						<input name="name" ng-model="newProduct.name" maxlength="21" required ng-minlength="5" ng-maxlength="20" class="form-control" placeholder="Terméknév">
						<span ng-show="uploadform.name.$error.required && !uploadform.name.$pristine">
			            	A mező kitöltése kötelező!<br>
			            </span>
			            <span ng-show="uploadform.name.$error.minlength && !uploadform.name.$pristine">
			            	Legalább 5 karakter hosszú kell legyen a név!<br>
			            </span>
			            <span ng-show="uploadform.name.$error.maxlength && !uploadform.name.$pristine">
			            	Legfeljebb 20 karakter hosszú lehet a név!<br>
			            </span>
			        </div>
			        <div class="productUpDropdown" >
						<div id="category" class="select-dropdown" tabindex="1" ng-class="{active : category_active}">
		                    <span tabindex="1" ng-click="toggleCategoryActive()" ng-class="{'select-error' : error_category}">{{newProduct.category}}</span>
		                    <ul class="uldropdown" ng-click="toggleCategoryActive()">
		                        <li data-ng-repeat="city in $root.cities" ng-click="setCategory('Első')">{{city.city}}</li>
		                        
		                    </ul>
		                </div>
		                <div id="city" class="select-dropdown" tabindex="2" ng-class="{active : city_active}">
		                    <span tabindex="1" ng-click="toggleCityActive()" ng-class="{'select-error' : error_city}">{{newProduct.city}}</span>
		                    <ul class="uldropdown" ng-click="toggleCityActive()">
		                        <li data-ng-repeat="city in $root.cities"> <a data-ng-click="setSelectedClient()">{{city.city}}<span data-ng-class="newProduct.city.name"></span></a>
		                    </ul>
		                </div>
					</div>
					<div class="form-group" ng-class="{'has-error' : uploadform.area.$invalid && !uploadform.area.$pristine}">
						<input name="area" ng-model="newProduct.area" class="form-control" placeholder="Körzet km-ben" required ng-pattern="/^[0-9]*$/" ng-minlength="1" maxlength="4" ng-maxlength="3">
						<span ng-show="uploadform.area.$error.required && !uploadform.area.$pristine">
			            	A mező kitöltése kötelező!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.minlength && !uploadform.area.$pristine">
			            	Legalább 1 számjegyű kell legyen a körzet!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.maxlength && !uploadform.area.$pristine">
			            	Legfeljebb 3 számjegyű lehet a körzet!<br>
			            </span>
			            <span ng-show="uploadform.area.$error.pattern && !uploadform.area.$pristine">
			            	Csak számokat tartalmazhat!<br>
			            </span>
			        </div>
			        <div class="form-group" ng-class="{'has-error' : uploadform.description.$invalid && !uploadform.description.$pristine}">
						<textarea class="form-control" name="description" ng-model="newProduct.description" class="product_descr" placeholder="Termékleírás" required maxlength="256" ng-maxlength="255"></textarea>
						<span ng-show="uploadform.description.$error.required && !uploadform.description.$pristine">
			            	A mező kitöltése kötelező!<br>
			            </span>
			             <span ng-show="uploadform.description.$error.maxlength && !uploadform.description.$pristine">
			            	Legfeljebb 255 karakter hosszú lehet a leírás!<br>
			            </span>
					</div>
				</div>
			</div>
		</div>
		<div class="row">
			<div class="input-group">
				<span class="input-group-btn">
					<span class="btn btn-primary btn-file">
						Browse <input type="file" multiple="">
					</span>
				</span>
				<input type="text" class="form-control" readonly="">
			</div>
		</div>
		<div class="row">
			<div id="images_slide" class="carousel slide" data-ride="carousel">
				<div class="carousel-inner">
					<div class="item active">
						<div class="row">
							<div class="col-md-4">
								<a href="#delete" class="delete"><span class="glyphicon glyphicon-remove"></span></a>
								<img src="https://carlossub.files.wordpress.com/2011/08/flabellina-affinis_mg_5928-copia.jpg" alt="Image" class="img-responsive">
							</div>
							<div class="col-md-4">
								<a href="#delete" class="delete"><span class="glyphicon glyphicon-remove"></span></a>
								<img src="http://upload.wikimedia.org/wikipedia/commons/b/bc/Flabellina-300x200.jpg" alt="Image" class="img-responsive">
							</div>
						</div>
					</div>
				</div>
		
				<a class="left carousel-control" href="#images_slide" data-slide="prev">
					<span class="glyphicon glyphicon-chevron-left"></span>
				</a>
				<a class="right carousel-control" href="#images_slide" data-slide="next">
					<span class="glyphicon glyphicon-chevron-right"></span>
				</a>
			</div>
		</div>	
	</form>
	<div class="row">
		<button class="btn btn-primary" ng-click="productUpload(uploadform)">Feltöltés/Szerkesztés</button>
	</div>
</div>
<!-- <div ng-controller="cityCtrl"></div> -->

<!--
<script>
 	$(document)
		.on('change', '.btn-file :file', function() {
			var input = $(this),
			numFiles = input.get(0).files ? input.get(0).files.length : 1,
			label = input.val().replace(/\\/g, '/').replace(/.*\//, '');
			input.trigger('fileselect', [numFiles, label]);
	});

	$(document).ready( function() {
		$('.btn-file :file').on('fileselect', function(event, numFiles, label) {

			var input = $(this).parents('.input-group').find(':text'),
				log = numFiles > 1 ? numFiles + ' files selected' : label;

			if( input.length ) {
				input.val(log);
				var images_scroll = $(".carousel-inner");
				var image_html = '<div class="col-md-4"><a href="#delete" class="delete"><span class="glyphicon glyphicon-remove"></span></a><img src="https://carlossub.files.wordpress.com/2011/08/flabellina-affinis_mg_5928-copia.jpg" alt="Image" class="img-responsive"></div>';
				
				var last_item = images_scroll.children().last().find('.row');
				var place_number = 3-last_item.children().length;
				if(place_number==0){
					images_scroll.append('<div class="item"><div class="row"></div></div>');
					last_item = images_scroll.children().last().find('.row');
				}
				last_item.append(image_html);
				$(".product_upload img").hoverfunction();
			} else {
				if( log ) alert(log);
			}
		});
	});
	
	$.fn.hoverfunction = function(){
		$(".product_upload img").hover(function(){
			var parent = $(this).parent();
			parent.find(".glyphicon-remove").css({"margin-bottom" : "-30px","display" : "inline-block"});
		}, function(){
			var parent = $(this).parent();
			parent.find(".glyphicon-remove").hide();
		});
	};
	
	$(document).ready($.fn.hoverfunction());
</script> -->
